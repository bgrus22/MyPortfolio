#loading data
library(here)
library(haven)
#data wrangling
library(dplyr)
library(tidyr)
library(knitr)
#data presentation
library(ggplot2)
library(jtools)
#regression tools
library(ivreg)
library(multiwayvcov)
library(fixest)
library(car)
#loading data
library(here)
library(haven)
#data wrangling
library(dplyr)
library(tidyr)
library(knitr)
#data presentation
library(ggplot2)
library(jtools)
#regression tools
library(ivreg)
library(multiwayvcov)
library(fixest)
library(car)
H1 = read.csv(file = 'Data/2020-02-11/H1.csv')
H2 = read.csv(file = 'Data/2020-02-11/H2.csv')
hotels = read.csv(file = 'Data/2020-02-11/hotels.csv')
fullH = merge(H1,H2,all = TRUE)
fullHotel <- merge(fullH,hotels, all = TRUE)
View(hotels)
View(hotels)
table(hotels$hotel)
hotel$Resort <- hotels$hotel[hotels$hotel == 'Resort Hotel']
hotels$Resort <- hotels$hotel[hotels$hotel == 'Resort Hotel']
hotels$Resort <- hotels$hotel[hotels$hotel == 'Resort Hotel',]
hotels$Resort <- hotels$hotel[,hotels$hotel == 'Resort Hotel']
hotels$Resort <- hotels$hotel[hotels$hotel == 'Resort Hotel':]
hotels$Resort <- hotels$hotel[hotels$hotel == 'Resort Hotel']
hotels$Resort <- (hotels$hotel == 'Resort Hotel')
View(hotels)
hotels$Resort <- (hotels$hotel == 'Resort Hotel')
table(hotels$Resort)
# create desired binary
hotels$Resort <- (hotels$hotel == 'Resort Hotel')
table(hotels$hotel)
# create desired binaries
hotels$Resort <- (hotels$hotel == 'Resort Hotel')
H1$Resort <- TRUE
H2$Resort <- FALSE
# concat data
fullH = merge(H1,H2,all = TRUE)
View(fullH)
hotels$reservation_status
table(hotels$reservation_status)
table(fullH$reservation_status)
table(fullH$reservation_status)
table(fullH$ReservationStatus)
table(hotels$reservation_status)
table(hotels$children)
table(fullH$children)
table(fullH$Children)
table(fullH$ReservationStatus)
table(fullH$ReservationStatus)
table(fullH$ReservationStatus)
# merge data
H1$Resort <- TRUE
H2$Resort <- FALSE
fullH = merge(H1,H2,all = TRUE)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
ols.1 <- lm(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled,data = fullH)
table(ols.1)
ols.1 <- lm(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled,data = fullH)
summary(ols.1)
# merge data
H1$Resort <- TRUE
H2$Resort <- FALSE
fullH = merge(H1,H2,all = TRUE)
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
ols.1 <- lm(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled,data = fullH)
summary(ols.1)
feols.1 <- feols(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled, vcov = ArrivalDateMonth ,data = fullH)
feols.1 <- feols(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled, vcov = ArrivalDateMonth, data = fullH)
feols.1 <- feols(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled, vcov = ~ArrivalDateMonth, data = fullH)
summary(feols.1)
feols.1 <- feols(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled, vcov = ~ArrivalKey, data = fullH)
summary(feols.1)
View(fullH)
#loading data
library(here)
library(haven)
#data wrangling
library(dplyr)
library(tidyr)
library(knitr)
library(lubridate)
#data presentation
library(ggplot2)
library(jtools)
#regression tools
library(ivreg)
library(multiwayvcov)
library(fixest)
library(car)
#loading data
library(here)
library(haven)
#data wrangling
library(dplyr)
library(tidyr)
library(knitr)
library(lubridate)
#data presentation
library(ggplot2)
library(jtools)
#regression tools
library(ivreg)
library(multiwayvcov)
library(fixest)
library(car)
# Load in Data
H1 = read.csv(file = 'Data/H1.csv')
H2 = read.csv(file = 'Data/H2.csv')
# merge data
H1$Resort <- TRUE
H2$Resort <- FALSE
fullH = merge(H1,H2,all = TRUE)
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = month_to_number(fullH$ArrivalDateMonth)
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear, fullH$ArrivalDateDayOfMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear, fullH$ArrivalDateDayOfMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonthNum)
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear,sep = "_")
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear, fullH$ArrivalDateDayOfMonthNum,sep = "_")
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth,sep = "_")
fullH$date[,1:]
fullH$date[,1]
fullH$date[1,]
fullH$date[,1;]
fullH$date[,1:]
fullH$date[,1]
fullH$date[1,1]
fullH$date[1,]
fullH$date
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear,sep = "_")
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear, fullH$ArrivalDateDayOfMonthNum,sep = "_")
#fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth,sep = "_")
fullH$date
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear,sep = "_")
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear, fullH$ArrivalDateDayOfMonthNum)
#fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth,sep = "_")
fullH$date
fullH$ArrivalDateMonthNum
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear,sep = "_")
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateDayOfMonthNum)
#fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth,sep = "_")
fullH$date
fullH <- fullH %>%
unite('date',ArrivalDateYear:ArrivalDateDayOfMonthNum,remove = FALSE)
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear,sep = "_")
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateDayOfMonthNum)
#fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth,sep = "_")
fullH <- fullH %>%
unite('date',ArrivalDateYear:ArrivalDateDayOfMonthNum,remove = FALSE)
fullH <- fullH %>%
unite('date',ArrivalDateYear:ArrivalDateDayOfMonthNum,na.rm = TRUE,remove = FALSE)
fullH <- fullH %>%
unite(date,ArrivalDateYear:ArrivalDateDayOfMonthNum,na.rm = TRUE,remove = FALSE)
fullH <- fullH %>%
unite('date',ArrivalDateYear:ArrivalDateMonthNum,na.rm = TRUE,remove = FALSE)
fullH$date
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear,sep = "_")
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
#fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth,sep = "_")
fullH$date
#concat the month and year variables
fullH$ArrivalKey <- paste(fullH$ArrivalDateMonth, fullH$ArrivalDateYear,sep = "_")
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date
fullH <- fullH %>%
unite('date1',ArrivalDateYear:ArrivalDateMonthNum,remove = FALSE) %>%
unite('date1',date1:ArrivalDateDayOfMonth,remove = FALSE)
fullH$date1
fullH$date
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date <- ymd(date)
View(fullH)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date <- fullH$date %>%
gsub(" ","",fullH$date,fixed = TRUE)
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date <- fullH$date %>%
fullH$date = gsub(" ","",fullH$date,fixed = TRUE) %>%
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date = gsub(" ","",fullH$date,fixed = TRUE) %>%
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date = gsub(" ","",fullH$date,fixed = TRUE) %>%
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date = gsub(" ","",fullH$date) %>%
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#create date variable
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
fullH$date = gsub(" ","",fullH$date)
fullH$date <- ymd(date)
fullH$date
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
ifelse(nchar(fullH$ArrivalDateMonthNum)!=2,paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
ifelse(nchar(fullH$ArrivalDateDayOfMonth)!=2,paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#remove spaces
fullH$date = gsub(" ","",fullH$date)
#ymd to format
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(nchar(fullH$ArrivalDateMonthNum)!=2,paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(nchar(fullH$ArrivalDateDayOfMonth)!=2,paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#remove spaces
fullH$date = gsub(" ","",fullH$date)
#ymd to format
fullH$date <- ymd(date)
fullH$date
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(nchar(fullH$ArrivalDateMonthNum)!=2,paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(nchar(fullH$ArrivalDateDayOfMonth)!=2,paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#format for lubridate
fullH$date = gsub(" ","",fullH$date)
fullH$date <- as.integer(fullH$date)
#ymd to format
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(nchar(fullH$ArrivalDateMonthNum)!=2,paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(nchar(fullH$ArrivalDateDayOfMonth)!=2,paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#format for lubridate
fullH$date = gsub(" ","",fullH$date)
fullH$date <- as.integer(fullH$date)
#ymd to format
fullH$date <- ymd(date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(nchar(fullH$ArrivalDateMonthNum)!=2,paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(nchar(fullH$ArrivalDateDayOfMonth)!=2,paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#format for lubridate
fullH$date = gsub(" ","",fullH$date)
fullH$date <- as.integer(fullH$date)
#ymd to format
fullH$date <- ymd(date)
fullH$date
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(nchar(fullH$ArrivalDateMonthNum)!=2,paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(nchar(fullH$ArrivalDateDayOfMonth)!=2,paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#format for lubridate
fullH$date = gsub(" ","",fullH$date)
fullH$date <- as.integer(fullH$date)
#ymd to format
fullH$date <- ymd(fullH$date)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
#loading data
library(here)
library(haven)
#data wrangling
library(dplyr)
library(tidyr)
library(knitr)
library(lubridate)
#data presentation
library(ggplot2)
library(jtools)
#regression tools
library(ivreg)
library(multiwayvcov)
library(fixest)
library(car)
# Load in Data
H1 = read.csv(file = 'Data/H1.csv')
H2 = read.csv(file = 'Data/H2.csv')
# merge data
H1$Resort <- TRUE
H2$Resort <- FALSE
fullH = merge(H1,H2,all = TRUE)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(
nchar(fullH$ArrivalDateMonthNum)!=2,
paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(
nchar(fullH$ArrivalDateDayOfMonth)!=2,
paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#format for lubridate
fullH$date = gsub(" ","",fullH$date)
fullH$date <- as.integer(fullH$date)
#ymd to format
fullH$date <- ymd(fullH$date)
#mark covid as 2020
fullH$postCoVid <- ifelse(
fullH$date >= 20200301,
1,0)
ols.1 <- lm(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled + postCoVid,data = fullH)
summary(ols.1)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(
nchar(fullH$ArrivalDateMonthNum)!=2,
paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(
nchar(fullH$ArrivalDateDayOfMonth)!=2,
paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#format for lubridate
fullH$date = gsub(" ","",fullH$date)
fullH$date <- as.integer(fullH$date)
#ymd to format
fullH$date <- ymd(fullH$date)
#mark covid as 2020
fullH$postCoVid <- ifelse(
fullH$date >= ymd(20200301),
1,0)
ols.1 <- lm(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled + postCoVid,data = fullH)
summary(ols.1)
feols.1 <- feols(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled+ postCoVid, vcov = ~ArrivalKey, data = fullH)
feols.1 <- feols(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled+ postCoVid, data = fullH)
summary(feols.1)
# merge data
H1$Resort <- TRUE
H2$Resort <- FALSE
fullH = merge(H1,H2,all = TRUE)
fullH <- na.omit(fullH)
#create outcome variable for regressions
fullH$Showed <- (fullH$ReservationStatus =="Check-Out")
##create date variable
#manage month nd day values
fullH$ArrivalDateMonthNum = match(fullH$ArrivalDateMonth,month.name)
fullH$ArrivalDateMonthNum <- ifelse(
nchar(fullH$ArrivalDateMonthNum)!=2,
paste0('0',fullH$ArrivalDateMonthNum),fullH$ArrivalDateMonthNum)
fullH$ArrivalDateDayOfMonth <- ifelse(
nchar(fullH$ArrivalDateDayOfMonth)!=2,
paste0('0',fullH$ArrivalDateDayOfMonth),fullH$ArrivalDateDayOfMonth)
#combine variables
fullH$date <- paste(fullH$ArrivalDateYear,fullH$ArrivalDateMonthNum)
fullH$date <- paste(fullH$date, fullH$ArrivalDateDayOfMonth)
#format for lubridate
fullH$date = gsub(" ","",fullH$date)
fullH$date <- as.integer(fullH$date)
#ymd to format
fullH$date <- ymd(fullH$date)
#mark covid as 2020
fullH$postCoVid <- ifelse(
fullH$date >= ymd(20200301),
1,0)
ols.1 <- lm(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled + postCoVid,data = fullH)
summary(ols.1)
feols.1 <- feols(Showed ~ Resort + StaysInWeekNights + StaysInWeekendNights + Adults + Children + Babies + IsRepeatedGuest + PreviousBookingsNotCanceled+ postCoVid, data = fullH)
summary(feols.1)
